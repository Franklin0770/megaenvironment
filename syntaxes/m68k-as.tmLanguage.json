{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "AS - Motorola 68000",
	"scopeName": "source.m68k-as",
	"foldingStartMarker": "^\\s*(?i:macro|ifn?(?:def|symexist|used|exist|b)?|rept|irpc?|while|function|struct|switch)\\b",
	"foldingStopMarker": "^\\s*(?i:end(?:if|struct|case|m))\\b",
	"patterns": [
		{ "include": "#instructions" },
		{ "include": "#instruction-label-structure" },
		{ "include": "#instructions-jump" },
		{ "include": "#sizes" },
		{ "include": "#variables" },
		{ "include": "#constants" },
		{ "include": "#autoincrements" },
		{ "include": "#labels" },
		{ "include": "#comments" },
		{ "include": "#strings" },
		{ "include": "#operators" },
		{ "include": "#pseudo-instructions" },
		{ "include": "#symbols" },
		{ "include": "#functions" }
	],
	"repository": {
		"instructions": {
			"name": "instruction.mnemonic.as",
			"match": "\\b(?i:move[qapm]?|[lp]ea|add[aiqx]?|sub[aiqx]?|cmp[aim]?|clr|tst|b(?:tst|chg|set|clr)|andi?|e?ori?|not|ls[lr]|as[lr]|rox?[lr]|negx?|ex[gt]|swap|[asn]bcd|mul[su]|div[su]|nop|tas|s(?:eq|ne|pl|mi|cc|cs|vs|vc|hi|ls|ge|lt|gt|le)|stop|chk|illegal|link|unlk|reset|trapv?)\\b"
		},
		"instructions-jump": {
			"name": "instruction.jump.as",
			"match": "\\b(?i:b(?:ra|sr|c[cs]|eq|ne|pl|mi|v[sc]|h[is]|l[os]|g[et]|l[te])|j(?:mp|sr)|rt[ser])\\b"
		},
		"sizes": {
			"name": "instruction.size.as",
			"match": "(?i:\\.[bwls])(?!\\w)"
		},
		"autoincrements": {
			"name": "instruction.autoincrement.as",
			"match": "(?i:(?<=\\(a[0-7]\\))\\+|\\-(?=\\(a[0-7]\\)))"
		},
		"variables": {
			"name": "variable.register.as",
			"match": "\\b(?i:[da][0-7]|u?sp|ccr|pc|sr)\\b"
		},
		"constants": {
			"patterns": [
				{
					"name": "constant.immediate.as",
					"match": "(?<=\\s+)#(?=[\\w|$%@\\-('\"])"
				},
				{
					"name": "constant.numeric.as",
					"match": "(?<![\\w\\)])-?(?:\\d{1,10}|\\$[0-9a-fA-F]{1,8}|%[01]{1,32}|@[0-7]{1,11})(?!\\w)"
				}
			]
		},
		"comments": {
			"name": "directive.comment.as",
			"match": "\\;.*$"
		},
		"strings": {
			"patterns": [
				{
					"name": "directive.string.as",
					"begin": "\"",
					"end": "\""
				},
				{
					"name": "directive.string.as",
					"begin": "'",
					"end": "'"
				}
			]
		},
		"labels": {
			"patterns": [
				{
					"name": "directive.label.global.as",
					"match": "(?:^\\w+:?)|(?:\\s\\w+:)"
				},
				{
					"name": "directive.label.local.as",
					"match": "(?:^\\.[\\w\\.]+:?)|(?:\\s\\.[\\w\\.]+:)"
				},
				{
					"name": "directive.label.temporary.as",
					"match": "(?:^\\$\\$[\\w\\.]+:?)|(?:\\s\\$\\$[\\w\\.]+:)"
				},
				{
					"name": "directive.label.nameless.as",
					"match": "^[+-]$"
				}
			]
		},
		"operators": {
			"name": "directive.operator.as",
			"match": "(?:\\w[\\s\\(]?)?\\K(?::=|==|!=|<=|>=|<>|<<|>>|\\|\\||&&|!!|><|[-+*\\/#^~|&=<>!])"
		},
		"functions": {
			"name": "directive.function.as",
			"match": "(?i:sqrt|a?sinh?|a?cosh?|a?tanh?|a?coth?|exp|a?log|a?ld|ln|int|bit(?:cnt|pos)|(?:first|last)bit|sgn|abs|to(?:upper|lower)|(?:up|low)string|strlen|substr|charfromstr|strstr|val|exprtype|fsize|symused)(?=\\([^)\n]+\\))"
		},
		"symbols": {
			"name": "directive.symbol.as",
			"match": "(?<!\\w)(?:TRUE|FALSE|MOMCPU(?:NAME)?|CONSTPI|FLOATMAX|VERSION|ARCHITECTURE|DATE|TIME|FILE|LINE|PASS|SECTION)|[\\.\\$](?![\\w\\$])"	
		},
		"pseudo-instructions": {
			"name": "directive.pseudo.as",
			"match": "\\b(?i:d[cs]|set|equ|b?include|r?org|cpu|(?:de)?phase|rept|macro|function|endm?|(?:end)?struct|(?:end)?if|ifn?(?:def|symexist|used|exist|b)|else(?:if)?|switch|(?:else|end)?case|while|page(?:size)?|listing|padding|save|restore|align|message|warning|error|fatal|label|charset|codepage|pushv|popv|(?:sup|comp)mode|intsyntax|relaxed|segment|assume|(?:end)?expect|irpc?|exitm|shift|maxnest|newpage|macexp_(?:dft|ovr)|title|(?:out)?radix|public|global|forward|shared|read)\\b"
		},
		"instruction-label-structure": {
			"patterns": [
				{
					"match": "(?i:\\b(b(?:ra|sr|c[cs]|eq|ne|pl|mi|v[sc]|h[is]|l[os]|g[et]|l[te])|j(?:mp|sr))(\\.[swl])?)\\b\\s+((?:\\.|\\$\\$)?(?:[\\w\\.]+|[+-]))",
					"captures": {
						"1": { "name": "instruction.jump.as" },
						"2": { "name": "instruction.size.as" },
						"3": { "name": "directive.label.jump.as" }
					}
				},
				{
					"match": "(?i:\\b(db(?:t|f|c[cs]|eq|ne|pl|mi|v[sc]|h[is]|l[os]|g[et]|l[te])))\\b\\s+(?i:\\b(d[0-7])\\b)\\s*,\\s*((?:\\.|\\$\\$)?(?:[\\w\\.]+|[+-]))",
					"captures": {
						"1": { "name": "instruction.jump.as" },
						"2": { "name": "variable.register.as" },
						"3": { "name": "directive.label.jump.as" }
					}
				}
			]
		}
	}
}